<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Talktok â€” Minimalist Video Feed</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        * { -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000;
            color: #fff;
            margin: 0;
            overflow: hidden;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes likeHeart {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        @keyframes scaleIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes slideInRight {
            from { transform: translateX(30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(30px); opacity: 0; }
        }
        @keyframes modernEnter {
            from { transform: translateY(20px) scale(0.95); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }
        @keyframes modernExit {
            from { transform: translateY(0) scale(1); opacity: 1; }
            to { transform: translateY(-20px) scale(0.95); opacity: 0; }
        }
        @keyframes scaleFadeIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        @keyframes followSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes likePop {
            0% { transform: scale(1); }
            25% { transform: scale(1.2); }
            50% { transform: scale(1); }
            75% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes savePop {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }
        .animate-marquee { animation: marquee 12s linear infinite; }
        .animate-fadeIn { animation: fadeIn 0.3s ease-out; }
        .animate-like { animation: likeHeart 0.3s ease-out; }
        .animate-slideUp { animation: slideUp 0.3s ease-out; }
        .animate-pulse { animation: pulse 2s ease-in-out infinite; }
        .animate-bounce { animation: bounce 1s ease-in-out infinite; }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .animate-scaleIn { animation: scaleIn 0.5s ease-out; }
        .animate-spin { animation: spin 1s linear infinite; }
        .animate-slideInRight { animation: slideInRight 0.3s ease-out; }
        .animate-slideOutRight { animation: slideOutRight 0.3s ease-out; }
        .animate-follow { animation: followSuccess 0.3s ease-out; }
        .animate-likePop { animation: likePop 0.4s ease-out; }
        .animate-savePop { animation: savePop 0.3s ease-out; }
        .tab-content-enter { animation: slideInRight 0.3s ease-out; }
        .tab-content-exit { animation: slideOutRight 0.3s ease-out; }
        
        .video-container {
            height: 100dvh;
            height: 100vh;
            scroll-snap-type: y mandatory;
            overflow-y: scroll;
            overflow-x: hidden;
        }
        .video-card {
            scroll-snap-align: start;
            height: 100dvh;
            height: 100vh;
            min-height: -webkit-fill-available;
            position: relative;
        }
        .like-animation { animation: likeHeart 0.4s ease-out; }
        
        /* Registration animations */
        .reg-slide-enter { animation: slideUp 0.4s ease-out; }
        .reg-fade-enter { animation: fadeIn 0.3s ease-out; }
        .reg-scale-enter { animation: scaleIn 0.4s ease-out; }
        
        .gradient-text {
            background: linear-gradient(135deg, #fff 0%, #a1a1aa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .input-glow:focus {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }
        
        .avatar-gradient-1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .avatar-gradient-2 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .avatar-gradient-3 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .avatar-gradient-4 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .avatar-gradient-5 { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        .avatar-gradient-6 { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð¸ÐºÐ¾Ð½Ð¾Ðº Ñ‡ÐµÑ€ÐµÐ· SVG
        const Icon = ({ name, size = 24, fill = "none", className = "" }) => {
            const icons = {
                heart: <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />,
                message: <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z" />,
                share: <><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" /><polyline points="16 6 12 2 8 6" /><line x1="12" x2="12" y1="2" y2="15" /></>,
                bookmark: <><path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z" /></>,
                user: <><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></>,
                home: <><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" /><polyline points="9 22 9 12 15 12 15 22" /></>,
                plus: <><rect width="18" height="18" x="3" y="3" rx="2" /><line x1="12" x2="12" y1="8" y2="16" /><line x1="8" x2="16" y1="12" y2="12" /></>,
                volume2: <><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><path d="M15.54 8.46a5 5 0 0 1 0 7.07" /><path d="M19.07 4.93a10 10 0 0 1 0 14.14" /></>,
                volumeX: <><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><line x1="22" x2="16" y1="9" y2="15" /><line x1="16" x2="22" y1="9" y2="15" /></>,
                send: <><path d="m22 2-7 20-4-9-9-4Z" /><path d="M22 2 11 13" /></>,
                compass: <><circle cx="12" cy="12" r="10" /><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76" /></>,
                play: <polygon points="5 3 19 12 5 21 5 3" />,
                search: <><circle cx="11" cy="11" r="8" /><line x1="21" x2="16.65" y1="21" y2="16.65" /></>,
                bell: <><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9" /><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0" /></>,
                chat: <><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" /></>,
                back: <><polyline points="15 18 9 12 15 6" /></>,
                heartFill: <><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" fill="currentColor" /></>,
                video: <><polygon points="23 7 16 12 23 17 23 7" /><rect x="1" y="5" width="15" height="14" rx="2" ry="2" /></>,
                hash: <><line x1="4" x2="20" y1="9" y2="9" /><line x1="4" x2="20" y1="15" y2="15" /><line x1="10" x2="8" y1="3" y2="21" /></>,
                check: <><polyline points="20 6 9 17 4 12" /></>,
                camera: <><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" /><circle cx="12" cy="13" r="4" /></>,
                globe: <><circle cx="12" cy="12" r="10" /><line x1="2" x2="22" y1="12" y2="12" /><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" /></>,
                sparkles: <><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" /><path d="M5 3v4" /><path d="M9 3v4" /><path d="M2 7h4" /><path d="M18 7h4" /><path d="M3 12h4" /><path d="M17 12h4" /></>,
                rocket: <><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z" /><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z" /><path d="M9 9 4 4" /><path d="m15 15 5 5" /></>,
                arrowRight: <><path d="M5 12h14" /><path d="m12 5 7 7-7 7" /></>,
                arrowLeft: <><path d="M19 12H5" /><path d="m12 19-7-7 7-7" /></>,
                x: <><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></>,
                smile: <><circle cx="12" cy="12" r="10" /><path d="M8 14s1.5 2 4 2 4-2 4-2" /><line x1="9" x2="9.01" y1="9" y2="9" /><line x1="15" x2="15.01" y1="9" y2="9" /></>
            };

            return (
                <svg 
                    width={size} 
                    height={size} 
                    viewBox="0 0 24 24" 
                    fill={fill} 
                    stroke="currentColor" 
                    strokeWidth="2" 
                    strokeLinecap="round" 
                    strokeLinejoin="round" 
                    className={className}
                >
                    {icons[name] || null}
                </svg>
            );
        };

        const INITIAL_VIDEOS = [
            {
                id: 1,
                url: "https://assets.mixkit.co/videos/preview/mixkit-urban-street-view-at-night-1165-large.mp4",
                user: "night_rider",
                description: "Night lights and endless roads. Only the best vibes. #city #nightlife",
                likes: 12400,
                comments: 234,
                music: "Night Drive - Kavinsky Style",
                isFollowed: false,
                avatar: "from-purple-500 to-pink-500"
            },
            {
                id: 2,
                url: "https://assets.mixkit.co/videos/preview/mixkit-waves-coming-to-the-beach-shore-at-sunset-1213-large.mp4",
                user: "ocean_view",
                description: "Sunset therapy for the soul. ðŸŒŠ #ocean #sunset #calm",
                likes: 45100,
                comments: 892,
                music: "Beach Waves - Ambient Sounds",
                isFollowed: false,
                avatar: "from-blue-500 to-cyan-500"
            },
            {
                id: 3,
                url: "https://assets.mixkit.co/videos/preview/mixkit-coffee-beans-falling-into-a-glass-1175-large.mp4",
                user: "coffee_master",
                description: "Morning routine in 4K. Fresh roast. â˜• #coffee #aesthetic",
                likes: 8900,
                comments: 156,
                music: "Jazz Cafe - Lofi Beats",
                isFollowed: false,
                avatar: "from-amber-500 to-orange-500"
            },
            {
                id: 4,
                url: "https://assets.mixkit.co/videos/preview/mixkit-forest-stream-in-the-sunlight-529-large.mp4",
                user: "nature_lover",
                description: "Forest therapy ðŸŒ² #nature #forest #peace",
                likes: 32100,
                comments: 445,
                music: "Forest Sounds - Nature Vibes",
                isFollowed: false,
                avatar: "from-green-500 to-emerald-500"
            },
            {
                id: 5,
                url: "https://assets.mixkit.co/videos/preview/mixkit-aerial-view-of-city-traffic-at-night-11-large.mp4",
                user: "city_life",
                description: "Aerial view of the night metropolis ðŸ™ï¸ #city #aerial #night",
                likes: 56700,
                comments: 1203,
                music: "Urban Beats - City Nights",
                isFollowed: false,
                avatar: "from-indigo-500 to-purple-500"
            },
            {
                id: 6,
                url: "https://assets.mixkit.co/videos/preview/mixkit-sun-setting-over-palm-trees-1175-large.mp4",
                user: "sunset_chaser",
                description: "Sunset in paradise ðŸŒ… #sunset #paradise #dreams",
                likes: 78900,
                comments: 2341,
                music: "Tropical Vibes - Sunset Mix",
                isFollowed: false,
                avatar: "from-orange-500 to-red-500"
            }
        ];

        // Languages list
        const LANGUAGES = [
            { code: 'en', name: 'English', flag: 'ðŸ‡ºðŸ‡¸' },
            { code: 'ru', name: 'Ð ÑƒÑÑÐºÐ¸Ð¹', flag: 'ðŸ‡·ðŸ‡º' },
            { code: 'uk', name: 'Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°', flag: 'ðŸ‡ºðŸ‡¦' },
            { code: 'es', name: 'EspaÃ±ol', flag: 'ðŸ‡ªðŸ‡¸' },
            { code: 'fr', name: 'FranÃ§ais', flag: 'ðŸ‡«ðŸ‡·' },
            { code: 'de', name: 'Deutsch', flag: 'ðŸ‡©ðŸ‡ª' },
            { code: 'ja', name: 'æ—¥æœ¬èªž', flag: 'ðŸ‡¯ðŸ‡µ' },
            { code: 'ko', name: 'í•œêµ­ì–´', flag: 'ðŸ‡°ðŸ‡·' },
            { code: 'zh', name: 'ä¸­æ–‡', flag: 'ðŸ‡¨ðŸ‡³' },
            { code: 'pt', name: 'PortuguÃªs', flag: 'ðŸ‡§ðŸ‡·' },
            { code: 'it', name: 'Italiano', flag: 'ðŸ‡®ðŸ‡¹' },
            { code: 'pl', name: 'Polski', flag: 'ðŸ‡µðŸ‡±' }
        ];

        // Avatar gradients
        const AVATAR_GRADIENTS = [
            'avatar-gradient-1',
            'avatar-gradient-2',
            'avatar-gradient-3',
            'avatar-gradient-4',
            'avatar-gradient-5',
            'avatar-gradient-6'
        ];

        // Registration Component
        const RegistrationModal = ({ onComplete }) => {
            const [step, setStep] = useState(1);
            const [formData, setFormData] = useState({
                username: '',
                email: '',
                password: '',
                phone: '',
                displayName: '',
                avatar: 0,
                language: 'en'
            });
            const [errors, setErrors] = useState({});
            const [isAnimating, setIsAnimating] = useState(false);
            const [showConfetti, setShowConfetti] = useState(false);

            // Check if user already visited
            useEffect(() => {
                const hasVisited = localStorage.getItem('talktok_visited');
                if (hasVisited) {
                    onComplete(false);
                }
            }, []);

            // Username validation - English + @ only (without auto-adding @)
            const validateUsername = (value) => {
                // Remove @ for validation check
                const valueWithoutAt = value.startsWith('@') ? value.slice(1) : value;
                const englishOnly = /^[a-zA-Z0-9_]+$/.test(valueWithoutAt);
                const hasAtSymbol = value.startsWith('@');
                const validLength = valueWithoutAt.length >= 3 && valueWithoutAt.length <= 30;
                
                if (!hasAtSymbol) return 'Username must start with @';
                if (!englishOnly) return 'Only English letters, numbers and _ allowed';
                if (!validLength) return 'Username must be 3-30 characters';
                return null;
            };

            const validateEmail = (value) => {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(value) ? null : 'Enter a valid email address';
            };

            const validatePassword = (value) => {
                if (value.length < 6) return 'Password must be at least 6 characters';
                if (value.length > 50) return 'Password must be less than 50 characters';
                return null;
            };

            const validateStep1 = () => {
                const newErrors = {};
                const usernameError = validateUsername(formData.username);
                if (usernameError) newErrors.username = usernameError;
                
                const emailError = validateEmail(formData.email);
                if (emailError) newErrors.email = emailError;
                
                const passwordError = validatePassword(formData.password);
                if (passwordError) newErrors.password = passwordError;
                
                setErrors(newErrors);
                return Object.keys(newErrors).length === 0;
            };

            const validateStep2 = () => {
                const newErrors = {};
                if (!formData.displayName.trim()) {
                    newErrors.displayName = 'Display name is required';
                } else if (formData.displayName.length < 2) {
                    newErrors.displayName = 'Display name must be at least 2 characters';
                } else if (formData.displayName.length > 50) {
                    newErrors.displayName = 'Display name must be less than 50 characters';
                }
                setErrors(newErrors);
                return Object.keys(newErrors).length === 0;
            };

            const handleNext = () => {
                if (isAnimating) return;
                
                if (step === 1 && validateStep1()) {
                    setIsAnimating(true);
                    setTimeout(() => {
                        setStep(2);
                        setIsAnimating(false);
                    }, 300);
                } else if (step === 2 && validateStep2()) {
                    setIsAnimating(true);
                    setTimeout(() => {
                        setStep(3);
                        setIsAnimating(false);
                    }, 300);
                } else if (step === 3) {
                    setIsAnimating(true);
                    setTimeout(() => {
                        setStep(4);
                        setIsAnimating(false);
                        setShowConfetti(true);
                    }, 300);
                }
            };

            const handleBack = () => {
                if (isAnimating || step === 1) return;
                setIsAnimating(true);
                setTimeout(() => {
                    setStep(step - 1);
                    setIsAnimating(false);
                }, 300);
            };

            const handleComplete = () => {
                // Save user data to localStorage
                const userData = {
                    username: formData.username,
                    displayName: formData.displayName,
                    email: formData.email,
                    phone: formData.phone || null,
                    avatarGradient: AVATAR_GRADIENTS[formData.avatar],
                    language: formData.language,
                    // Realistic initial stats
                    posts: 0,
                    followers: 0,
                    following: 0,
                    likes: 0,
                    bio: '',
                    likedVideos: [],
                    isFollowed: [],
                    createdAt: new Date().toISOString()
                };
                localStorage.setItem('talktok_user', JSON.stringify(userData));
                localStorage.setItem('talktok_visited', 'true');
                
                onComplete(true);
            };

            const handleSkip = () => {
                localStorage.setItem('talktok_visited', 'true');
                onComplete(false);
            };

            const renderStep = () => {
                switch(step) {
                    case 1:
                        return (
                            <div className={`space-y-5 ${isAnimating ? 'opacity-0 transform scale-95' : 'opacity-100'} transition-all duration-300`}>
                                <div className="text-center mb-6">
                                    <h2 className="text-2xl font-bold gradient-text mb-2">Create your account</h2>
                                    <p className="text-zinc-400 text-sm">Join the TalkTok community</p>
                                </div>
                                
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-zinc-300 mb-2">
                                            Username <span className="text-zinc-500 text-xs">(English + @ only)</span>
                                        </label>
                                        <input
                                            type="text"
                                            value={formData.username}
                                            onChange={(e) => setFormData({...formData, username: e.target.value})}
                                            placeholder="@username"
                                            maxLength={30}
                                            className={`w-full bg-zinc-800/50 border rounded-xl px-4 py-3 text-white outline-none focus:ring-2 focus:ring-white/20 transition-all input-glow ${errors.username ? 'border-red-500' : 'border-zinc-700 focus:border-white/30'}`}
                                        />
                                        {errors.username && <p className="text-red-400 text-xs mt-1">{errors.username}</p>}
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-zinc-300 mb-2">Email</label>
                                        <input
                                            type="email"
                                            value={formData.email}
                                            onChange={(e) => setFormData({...formData, email: e.target.value})}
                                            placeholder="your@email.com"
                                            className={`w-full bg-zinc-800/50 border rounded-xl px-4 py-3 text-white outline-none focus:ring-2 focus:ring-white/20 transition-all input-glow ${errors.email ? 'border-red-500' : 'border-zinc-700 focus:border-white/30'}`}
                                        />
                                        {errors.email && <p className="text-red-400 text-xs mt-1">{errors.email}</p>}
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-zinc-300 mb-2">Password</label>
                                        <input
                                            type="password"
                                            value={formData.password}
                                            onChange={(e) => setFormData({...formData, password: e.target.value})}
                                            placeholder="********"
                                            maxLength={50}
                                            className={`w-full bg-zinc-800/50 border rounded-xl px-4 py-3 text-white outline-none focus:ring-2 focus:ring-white/20 transition-all input-glow ${errors.password ? 'border-red-500' : 'border-zinc-700 focus:border-white/30'}`}
                                        />
                                        {errors.password && <p className="text-red-400 text-xs mt-1">{errors.password}</p>}
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-zinc-300 mb-2">
                                            Phone <span className="text-zinc-500 text-xs">(optional)</span>
                                        </label>
                                        <input
                                            type="tel"
                                            value={formData.phone}
                                            onChange={(e) => setFormData({...formData, phone: e.target.value})}
                                            placeholder="+1234567890"
                                            className="w-full bg-zinc-800/50 border border-zinc-700 rounded-xl px-4 py-3 text-white outline-none focus:ring-2 focus:ring-white/20 transition-all input-glow"
                                        />
                                    </div>
                                </div>
                            </div>
                        );
                    
                    case 2:
                        return (
                            <div className={`space-y-5 ${isAnimating ? 'opacity-0 transform scale-95' : 'opacity-100'} transition-all duration-300`}>
                                <div className="text-center mb-6">
                                    <h2 className="text-2xl font-bold gradient-text mb-2">Personalize</h2>
                                    <p className="text-zinc-400 text-sm">Show yourself to the world</p>
                                </div>
                                
                                {/* Avatar Selection */}
                                <div>
                                    <label className="block text-sm font-medium text-zinc-300 mb-3">Choose your avatar</label>
                                    <div className="flex justify-center gap-3 flex-wrap">
                                        {AVATAR_GRADIENTS.map((gradient, index) => (
                                            <button
                                                key={index}
                                                onClick={() => setFormData({...formData, avatar: index})}
                                                className={`w-16 h-16 rounded-full transition-all duration-200 ${gradient} ${formData.avatar === index ? 'ring-4 ring-white scale-110' : 'opacity-60 hover:opacity-100'}`}
                                            >
                                                <div className="w-full h-full flex items-center justify-center">
                                                    <Icon name="user" size={24} className="text-white" />
                                                </div>
                                            </button>
                                        ))}
                                    </div>
                                </div>
                                
                                {/* Display Name */}
                                <div>
                                    <label className="block text-sm font-medium text-zinc-300 mb-2">
                                        Display Name <span className="text-zinc-500 text-xs">(any language allowed)</span>
                                    </label>
                                    <input
                                        type="text"
                                        value={formData.displayName}
                                        onChange={(e) => setFormData({...formData, displayName: e.target.value})}
                                        placeholder="Your Name"
                                        maxLength={50}
                                        className={`w-full bg-zinc-800/50 border rounded-xl px-4 py-3 text-white outline-none focus:ring-2 focus:ring-white/20 transition-all input-glow ${errors.displayName ? 'border-red-500' : 'border-zinc-700 focus:border-white/30'}`}
                                    />
                                    {errors.displayName && <p className="text-red-400 text-xs mt-1">{errors.displayName}</p>}
                                    <p className="text-zinc-500 text-xs mt-1">This is what others will see</p>
                                </div>
                                
                                {/* Preview */}
                                <div className="glass-card rounded-xl p-4 flex items-center gap-3">
                                    <div className={`w-12 h-12 rounded-full ${AVATAR_GRADIENTS[formData.avatar]} flex items-center justify-center`}>
                                        <Icon name="user" size={20} className="text-white" />
                                    </div>
                                    <div>
                                        <p className="font-semibold">{formData.displayName || 'Your Name'}</p>
                                        <p className="text-sm text-zinc-400">{formData.username || '@username'}</p>
                                    </div>
                                </div>
                            </div>
                        );
                    
                    case 3:
                        return (
                            <div className={`space-y-5 ${isAnimating ? 'opacity-0 transform scale-95' : 'opacity-100'} transition-all duration-300`}>
                                <div className="text-center mb-6">
                                    <h2 className="text-2xl font-bold gradient-text mb-2">Select language</h2>
                                    <p className="text-zinc-400 text-sm">Choose your preferred language</p>
                                </div>
                                
                                <div className="grid grid-cols-2 gap-2 max-h-80 overflow-y-auto no-scrollbar">
                                    {LANGUAGES.map((lang) => (
                                        <button
                                            key={lang.code}
                                            onClick={() => setFormData({...formData, language: lang.code})}
                                            className={`flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${formData.language === lang.code ? 'bg-white text-black' : 'bg-zinc-800/50 text-white hover:bg-zinc-700'}`}
                                        >
                                            <span className="text-xl">{lang.flag}</span>
                                            <span className="font-medium">{lang.name}</span>
                                            {formData.language === lang.code && <Icon name="check" size={16} className="ml-auto" />}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        );
                    
                    case 4:
                        return (
                            <div className={`text-center ${isAnimating ? 'opacity-0 transform scale-95' : 'opacity-100'} transition-all duration-300`}>
                                {/* Confetti Animation - removed for cleaner look */}
                                
                                <div className="mb-4">
                                    <div className={`w-20 h-20 mx-auto rounded-full ${AVATAR_GRADIENTS[formData.avatar]} flex items-center justify-center mb-3`}>
                                        <Icon name="user" size={32} className="text-white" />
                                    </div>
                                </div>
                                
                                <h2 className="text-2xl font-bold text-white mb-3">
                                    Welcome, {formData.displayName}!
                                </h2>
                                
                                <div className="glass-card rounded-xl p-4 mb-4">
                                    <p className="text-sm text-zinc-400">
                                        Your account is ready. Start exploring amazing content!
                                    </p>
                                </div>
                                
                                {/* Stats removed for cleaner look */}
                            </div>
                        );
                    
                    default:
                        return null;
                }
            };

            return (
                <div className="fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4 overflow-hidden" style={{ height: '100dvh', paddingBottom: 'env(safe-area-inset-bottom)' }}>
                    {/* Skip Button */}
                    <button
                        onClick={handleSkip}
                        className="absolute top-4 right-4 text-zinc-500 hover:text-zinc-300 text-xs px-3 py-1.5 rounded-full hover:bg-zinc-800/50 transition-all"
                    >
                        Skip
                    </button>
                    
                    <div className="w-full max-w-md">
                        {/* Progress Dots - removed for cleaner look */}
                        
                        {/* Content */}
                        <div className="glass-card rounded-3xl p-6 min-h-[400px] flex flex-col pb-8">
                            {renderStep()}
                            
                            {/* Navigation Buttons */}
                            <div className="mt-auto flex gap-3 pt-6">
                                {step > 1 && step < 4 && (
                                    <button
                                        onClick={handleBack}
                                        disabled={isAnimating}
                                        className="px-6 py-3 rounded-xl bg-zinc-800 text-white font-medium hover:bg-zinc-700 transition-all disabled:opacity-50"
                                    >
                                        Back
                                    </button>
                                )}
                                
                                {step < 4 ? (
                                    <button
                                        onClick={handleNext}
                                        disabled={isAnimating}
                                        className="flex-1 py-3 rounded-xl bg-white text-black font-bold hover:bg-zinc-200 transition-all disabled:opacity-50 flex items-center justify-center gap-2"
                                    >
                                        Continue
                                        <Icon name="arrowRight" size={18} />
                                    </button>
                                ) : (
                                    <button
                                        onClick={handleComplete}
                                        className="flex-1 py-3 rounded-xl bg-white text-black font-bold hover:bg-zinc-200 transition-all flex items-center justify-center gap-2"
                                    >
                                        <Icon name="arrowRight" size={18} />
                                        Let's Go!
                                    </button>
                                )}
                            </div>
                        </div>
                        
                        {/* Footer Text */}
                        <p className="text-center text-zinc-600 text-xs mt-4">
                            {step === 1 && 'Step 1 of 4'}
                            {step === 2 && 'Step 2 of 4'}
                            {step === 3 && 'Step 3 of 4'}
                            {step === 4 && 'Ready to explore!'}
                        </p>
                    </div>
                </div>
            );
        };

        // Get user data from localStorage
        const getUserData = () => {
            const data = localStorage.getItem('talktok_user');
            return data ? JSON.parse(data) : null;
        };

        // Video Player Component
        const VideoPlayer = ({ video, isActive, onFollowToggle, onDoubleTap, showComments, onToggleComments }) => {
            const videoRef = useRef(null);
            const [playing, setPlaying] = useState(false);
            const [muted, setMuted] = useState(true);
            const [liked, setLiked] = useState(false);
            const [saved, setSaved] = useState(false);
            const [localLikes, setLocalLikes] = useState(video.likes);
            const [showPlayIcon, setShowPlayIcon] = useState(false);
            const [likeAnimation, setLikeAnimation] = useState(false);
            const [saveAnimation, setSaveAnimation] = useState(false);
            const lastTapRef = useRef(0);
            const pauseTimeoutRef = useRef(null);

            useEffect(() => {
                if (isActive) {
                    videoRef.current.play().catch(() => {});
                    setPlaying(true);
                } else {
                    videoRef.current.pause();
                    setPlaying(false);
                }
            }, [isActive]);

            const togglePlay = () => {
                const now = Date.now();
                
                // Clear any pending pause timeout
                if (pauseTimeoutRef.current) {
                    clearTimeout(pauseTimeoutRef.current);
                    pauseTimeoutRef.current = null;
                }
                
                // Double tap detection (within 300ms)
                if (now - lastTapRef.current < 300) {
                    // Double tap - like
                    if (!liked) {
                        setLiked(true);
                        setLocalLikes(prev => prev + 1);
                        setLikeAnimation(true);
                        setTimeout(() => setLikeAnimation(false), 400);
                    }
                    onDoubleTap && onDoubleTap();
                    lastTapRef.current = 0;
                    return;
                }
                lastTapRef.current = now;
                
                // Single tap - toggle pause immediately
                if (playing) {
                    videoRef.current.pause();
                    setShowPlayIcon(true);
                    setTimeout(() => setShowPlayIcon(false), 500);
                } else {
                    videoRef.current.play();
                }
                setPlaying(!playing);
            };

            const handleLike = (e) => {
                e.stopPropagation();
                setLiked(!liked);
                setLocalLikes(prev => liked ? prev - 1 : prev + 1);
                if (!liked) {
                    setLikeAnimation(true);
                    setTimeout(() => setLikeAnimation(false), 400);
                }
            };

            const handleSave = () => {
                setSaved(!saved);
                setSaveAnimation(true);
                setTimeout(() => setSaveAnimation(false), 300);
            };

            const handleShare = () => {
                if (navigator.share) {
                    navigator.share({
                        title: `Video by @${video.user}`,
                        text: video.description,
                        url: window.location.href
                    });
                } else {
                    navigator.clipboard.writeText(`Check out this video by @${video.user}: ${video.description}`);
                    alert("Link copied to clipboard!");
                }
            };

            const formatCount = (num) => {
                return num >= 1000 ? (num / 1000).toFixed(1) + 'K' : num;
            };

            return (
                <div className="video-card w-full flex items-center justify-center bg-black overflow-hidden" style={{ height: '100dvh', minHeight: '-webkit-fill-available' }}>
                    <div 
                        className="absolute inset-0 w-full h-full"
                        onTouchEnd={togglePlay}
                        onClick={togglePlay}
                    >
                        <video
                            ref={videoRef}
                            src={video.url}
                            loop
                            muted={muted}
                            className="w-full h-full object-cover cursor-pointer"
                        />
                    </div>
                    
                    {/* Play/Pause indicator - shows when paused */}
                    {(!playing || showPlayIcon) && (
                        <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                            <div className={`bg-black/20 p-6 rounded-full backdrop-blur-sm transition-opacity duration-200 ${showPlayIcon ? 'opacity-100' : 'opacity-50'}`}>
                                <Icon name="play" size={48} fill="white" className="text-white" />
                            </div>
                        </div>
                    )}

                    <div className="absolute right-3 bottom-28 md:bottom-24 flex flex-col items-center gap-5 z-10">
                        <div className="flex flex-col items-center gap-1">
                            <button 
                                onClick={handleLike} 
                                className={`p-3 rounded-full bg-zinc-900/40 backdrop-blur-xl transition-all active:scale-90 ${liked ? 'text-red-500' : 'text-white'} ${likeAnimation ? 'animate-likePop' : ''}`}
                            >
                                <Icon name={liked ? "heartFill" : "heart"} fill={liked ? "currentColor" : "none"} size={26} />
                            </button>
                            <span className="text-[11px] font-semibold text-white">{formatCount(localLikes)}</span>
                        </div>
                        <div className="flex flex-col items-center gap-1">
                            <button 
                                onClick={onToggleComments}
                                className={`p-3 rounded-full bg-zinc-900/40 backdrop-blur-xl transition-all active:scale-90 ${showComments ? 'text-white' : 'text-white'}`}
                            >
                                <Icon name="message" size={26} />
                            </button>
                            <span className="text-[11px] font-semibold text-white">{video.comments}</span>
                        </div>
                        <div className="flex flex-col items-center gap-1">
                            <button 
                                onClick={handleSave} 
                                className={`p-3 rounded-full bg-zinc-900/40 backdrop-blur-xl transition-all active:scale-90 ${saved ? 'text-yellow-400' : 'text-white'} ${saveAnimation ? 'animate-savePop' : ''}`}
                            >
                                <Icon name="bookmark" fill={saved ? "currentColor" : "none"} size={26} />
                            </button>
                            <span className="text-[11px] font-semibold text-white">Save</span>
                        </div>
                        <div className="flex flex-col items-center gap-1">
                            <button 
                                onClick={handleShare}
                                className="p-3 rounded-full bg-zinc-900/40 backdrop-blur-xl text-white transition-all active:scale-90"
                            >
                                <Icon name="share" size={26} />
                            </button>
                            <span className="text-[11px] font-semibold text-white">Share</span>
                        </div>
                        <button 
                            onClick={() => setMuted(!muted)} 
                            className="p-3 rounded-full bg-zinc-900/40 backdrop-blur-xl text-white mt-4 transition-all active:scale-90"
                        >
                            {muted ? <Icon name="volumeX" size={20} /> : <Icon name="volume2" size={20} />}
                        </button>
                    </div>

                    <div className="absolute bottom-0 left-0 right-0 p-5 pt-20 pb-24 bg-gradient-to-t from-black/90 via-black/20 to-transparent text-white z-10">
                        <div className="flex items-center gap-3 mb-3">
                            <div className={`w-10 h-10 rounded-full border-2 border-white/20 bg-gradient-to-br ${video.avatar} flex items-center justify-center overflow-hidden`}>
                                <Icon name="user" size={20} />
                            </div>
                            <span className="font-bold text-base">@{video.user}</span>
                            <button 
                                onClick={() => onFollowToggle(video.id)}
                                className={`ml-2 px-4 py-1.5 rounded-full text-xs font-bold transition-all hover:scale-105 ${video.isFollowed ? 'bg-zinc-800 text-white border border-zinc-700 animate-follow' : 'bg-white text-black hover:bg-zinc-200'}`}
                            >
                                {video.isFollowed ? 'Following' : 'Follow'}
                            </button>
                        </div>
                        <p className="text-sm font-medium mb-4 leading-relaxed max-w-[85%]">{video.description}</p>
                        <div className="flex items-center gap-2 text-xs font-semibold bg-white/10 w-fit px-3 py-1 rounded-full backdrop-blur-md">
                           <span>ðŸŽµ</span> {video.music}
                        </div>
                    </div>
                </div>
            );
        };

        // Profile View Component
        const ProfileView = ({ onBack }) => {
            const userData = getUserData() || {
                username: 'user',
                displayName: 'User',
                avatar: 'from-zinc-500 to-zinc-700',
                posts: 0,
                followers: 0,
                following: 0,
                bio: ''
            };
            const [isExiting, setIsExiting] = useState(false);
            
            const handleBack = () => {
                setIsExiting(true);
                // Blur any active input elements
                if (document.activeElement) {
                    document.activeElement.blur();
                }
                setTimeout(() => {
                    onBack();
                    setIsExiting(false);
                }, 300);
            };
            
            return (
                <div className={`flex-1 bg-black overflow-y-auto h-full ${isExiting ? 'animate-modernExit' : 'animate-modernEnter'}`}>
                    <div className="p-6 pb-24">
                        <button onClick={handleBack} className="mb-6 p-2 rounded-full bg-zinc-800/50 hover:bg-zinc-700 transition-colors">
                            <Icon name="back" size={20} />
                        </button>
                        
                        <div className="flex flex-col items-center mb-3">
                            <div className={`w-24 h-24 rounded-full bg-gradient-to-br ${userData.avatar || 'from-zinc-500 to-zinc-700'} flex items-center justify-center mb-3`}>
                                <Icon name="user" size={40} />
                            </div>
                            <h2 className="text-xl font-bold">{userData.displayName}</h2>
                            <p className="text-zinc-400 text-sm">@{userData.username}</p>
                        </div>
                        
                        <p className="text-center text-sm text-zinc-400 mb-4">{userData.bio || 'No bio yet'}</p>
                        
                        {/* Stats centered properly */}
                        <div className="flex justify-center gap-10 mb-6">
                            <div className="text-center">
                                <p className="text-lg font-bold">{userData.posts}</p>
                                <p className="text-xs text-zinc-500">Posts</p>
                            </div>
                            <div className="text-center">
                                <p className="text-lg font-bold">{userData.followers}</p>
                                <p className="text-xs text-zinc-500">Followers</p>
                            </div>
                            <div className="text-center">
                                <p className="text-lg font-bold">{userData.following}</p>
                                <p className="text-xs text-zinc-500">Following</p>
                            </div>
                        </div>
                        
                        <div className="flex gap-3">
                            <button className="flex-1 bg-white text-black py-2 rounded-lg font-semibold hover:bg-zinc-200 transition-colors">
                                Edit Profile
                            </button>
                            <button className="px-4 py-2 rounded-lg bg-zinc-800 font-semibold hover:bg-zinc-700 transition-colors">
                                Share
                            </button>
                        </div>
                        
                        <div className="mt-6">
                            <h3 className="text-sm font-bold mb-3">Saved</h3>
                            <div className="grid grid-cols-3 gap-1">
                                {INITIAL_VIDEOS.slice(0, 3).map((video, i) => (
                                    <div key={i} className="aspect-square bg-zinc-800 rounded overflow-hidden relative">
                                        <video src={video.url} className="w-full h-full object-cover" muted />
                                    </div>
                                ))}
                            </div>
                        </div>
                        
                        <div className="mt-6">
                            <h3 className="text-sm font-bold mb-3">Liked</h3>
                            <div className="grid grid-cols-3 gap-1">
                                {INITIAL_VIDEOS.filter(v => v.id % 2 === 0).map((video, i) => (
                                    <div key={i} className="aspect-square bg-zinc-800 rounded overflow-hidden relative">
                                        <video src={video.url} className="w-full h-full object-cover" muted />
                                        <div className="absolute bottom-1 left-1">
                                            <Icon name="heartFill" size={12} className="text-red-500" fill="currentColor" />
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Notifications/Chats View Component
        const ChatsView = ({ onBack }) => {
            const [chats] = useState(INITIAL_CHATS);
            const [activeTab, setActiveTab] = useState('chats');
            const [isExiting, setIsExiting] = useState(false);
            
            const handleBack = () => {
                setIsExiting(true);
                setTimeout(() => {
                    onBack();
                    setIsExiting(false);
                }, 300);
            };
            
            return (
                <div className={`flex-1 bg-black overflow-hidden h-full ${isExiting ? 'animate-modernExit' : 'animate-modernEnter'}`}
                    onTouchStart={(e) => e.stopPropagation()}
                >
                    <div className="p-6 pb-24">
                        <div className="flex items-center gap-4 mb-6">
                            <button onClick={handleBack} className="p-2 rounded-full bg-zinc-800/50 hover:bg-zinc-700 transition-colors">
                                <Icon name="back" size={20} />
                            </button>
                            <h2 className="text-xl font-black">Messages</h2>
                        </div>
                        
                        <div className="flex gap-2 mb-4">
                            <button 
                                onClick={() => setActiveTab('chats')}
                                className={`flex-1 py-2 rounded-lg font-semibold transition-colors ${activeTab === 'chats' ? 'bg-white text-black' : 'bg-zinc-800 text-white'}`}
                            >
                                Chats
                            </button>
                            <button 
                                onClick={() => setActiveTab('notifications')}
                                className={`flex-1 py-2 rounded-lg font-semibold transition-colors ${activeTab === 'notifications' ? 'bg-white text-black' : 'bg-zinc-800 text-white'}`}
                            >
                                Notifications
                            </button>
                        </div>
                        
                        {activeTab === 'chats' ? (
                            <div className="space-y-2">
                                {chats.map(chat => (
                                    <div key={chat.id} className="flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-900 transition-colors cursor-pointer">
                                        <div className={`w-12 h-12 rounded-full bg-gradient-to-br ${chat.avatar} flex items-center justify-center flex-shrink-0`}>
                                            <Icon name="user" size={20} />
                                        </div>
                                        <div className="flex-1 min-w-0">
                                            <div className="flex justify-between items-center">
                                                <p className="font-semibold">{chat.user}</p>
                                                <p className="text-xs text-zinc-500">{chat.time}</p>
                                            </div>
                                            <p className="text-sm text-zinc-400 truncate">{chat.lastMessage}</p>
                                        </div>
                                        {chat.unread > 0 && (
                                            <div className="w-5 h-5 rounded-full bg-red-500 flex items-center justify-center text-xs font-bold">
                                                {chat.unread}
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        ) : (
                            <div className="space-y-2">
                                <div className="flex items-center gap-3 p-3 rounded-xl bg-zinc-900/50">
                                    <div className="w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center">
                                        <Icon name="heartFill" size={20} fill="white" className="text-white" />
                                    </div>
                                    <div className="flex-1">
                                        <p className="font-semibold">New likes</p>
                                        <p className="text-sm text-zinc-400">night_rider and 5 others liked your video</p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-3 p-3 rounded-xl bg-zinc-900/50">
                                    <div className="w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center">
                                        <Icon name="user" size={20} />
                                    </div>
                                    <div className="flex-1">
                                        <p className="font-semibold">New followers</p>
                                        <p className="text-sm text-zinc-400">ocean_view started following you</p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-3 p-3 rounded-xl bg-zinc-900/50">
                                    <div className="w-12 h-12 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center">
                                        <Icon name="message" size={20} />
                                    </div>
                                    <div className="flex-1">
                                        <p className="font-semibold">Comments</p>
                                        <p className="text-sm text-zinc-400">alex_vfx commented on your video</p>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const INITIAL_CHATS = [
            { id: 1, user: "night_rider", avatar: "from-purple-500 to-pink-500", lastMessage: "Great video! ðŸ”¥", time: "2 min", unread: 2 },
            { id: 2, user: "ocean_view", avatar: "from-blue-500 to-cyan-500", lastMessage: "Send me the track link", time: "15 min", unread: 0 },
            { id: 3, user: "coffee_master", avatar: "from-amber-500 to-orange-500", lastMessage: "How did you get that angle?", time: "1 hr", unread: 1 },
            { id: 4, user: "sunset_chaser", avatar: "from-orange-500 to-red-500", lastMessage: "Let's shoot together!", time: "3 hr", unread: 0 }
        ];

        // Explore View Component
        const ExploreView = ({ onBack }) => {
            const [searchQuery, setSearchQuery] = useState("");
            const [videos] = useState(EXPLORE_VIDEOS);
            const [isExiting, setIsExiting] = useState(false);
            
            const handleBack = () => {
                setIsExiting(true);
                setTimeout(() => {
                    onBack();
                    setIsExiting(false);
                }, 300);
            };
            
            const filteredVideos = videos.filter(v => 
                v.user.toLowerCase().includes(searchQuery.toLowerCase()) ||
                v.likes.toLowerCase().includes(searchQuery.toLowerCase().replace('k', ''))
            );

            return (
                <div className={`flex-1 bg-black overflow-y-auto h-full ${isExiting ? 'animate-modernExit' : 'animate-modernEnter'}`}
                    onTouchStart={(e) => e.stopPropagation()}
                >
                    <div className="p-4 pb-24">
                        <div className="flex items-center gap-3 mb-4">
                            <button onClick={handleBack} className="p-2 rounded-full bg-zinc-800/50 hover:bg-zinc-700 transition-colors flex-shrink-0">
                                <Icon name="back" size={20} />
                            </button>
                            <div className="relative flex-1">
                                <Icon name="search" size={18} className="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400" />
                                <input 
                                    type="text"
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                    placeholder="Search users, videos, hashtags..."
                                    className="w-full bg-zinc-800 rounded-xl py-2.5 pl-10 pr-4 text-sm outline-none focus:ring-2 focus:ring-white/20 transition-all"
                                />
                            </div>
                        </div>
                        
                        {!searchQuery && (
                            <div className="mb-4">
                                <h3 className="text-sm font-semibold text-zinc-400 mb-2">Trending Hashtags</h3>
                                <div className="flex flex-wrap gap-2">
                                    {HASHTAGS.map(tag => (
                                        <button key={tag} className="px-3 py-1.5 rounded-full bg-zinc-800 text-sm hover:bg-zinc-700 transition-colors">
                                            {tag}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}
                        
                        <div className="grid grid-cols-3 gap-1 pb-20">
                            {filteredVideos.map(video => (
                                <div key={video.id} className="aspect-square bg-zinc-900 rounded overflow-hidden relative cursor-pointer group">
                                    <img src={video.thumbnail} alt="" className="w-full h-full object-cover" />
                                    <div className="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity" />
                                    <div className="absolute bottom-2 left-2">
                                        <p className="text-xs font-bold">@{video.user}</p>
                                        <div className="flex items-center gap-1 mt-1">
                                            <Icon name="heartFill" size={10} fill="white" className="text-white" />
                                            <span className="text-[10px]">{video.likes}</span>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                        
                        {filteredVideos.length === 0 && (
                            <div className="text-center py-12 text-zinc-400">
                                <Icon name="search" size={48} className="mx-auto mb-2 opacity-50" />
                                <p>No results found for "{searchQuery}"</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Mock explore grid videos
        const EXPLORE_VIDEOS = [
            { id: 101, thumbnail: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&h=400&fit=crop", user: "travel_gram", likes: "45.2K", views: "892K" },
            { id: 102, thumbnail: "https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=300&h=400&fit=crop", user: "fitness_pro", likes: "32.1K", views: "567K" },
            { id: 103, thumbnail: "https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=300&h=400&fit=crop", user: "nature_lover", likes: "67.8K", views: "1.2M" },
            { id: 104, thumbnail: "https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=300&h=400&fit=crop", user: "foodie_paradise", likes: "89.3K", views: "1.5M" },
            { id: 105, thumbnail: "https://images.unsplash.com/photo-1531297484001-80022131f5a1?w=300&h=400&fit=crop", user: "tech_guru", likes: "23.4K", views: "445K" },
            { id: 106, thumbnail: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300&h=400&fit=crop", user: "dance_master", likes: "156K", views: "3.4M" },
            { id: 107, thumbnail: "https://images.unsplash.com/photo-1492633423870-43d1cd2775eb?w=300&h=400&fit=crop", user: "life_adventures", likes: "78.5K", views: "1.1M" },
            { id: 108, thumbnail: "https://images.unsplash.com/photo-1518611012118-696072aa579a?w=300&h=400&fit=crop", user: "gym_rat", likes: "34.2K", views: "678K" },
            { id: 109, thumbnail: "https://images.unsplash.com/photo-1526778548025-fa2f459cd5c1?w=300&h=400&fit=crop", user: "travel_diaries", likes: "92.1K", views: "1.8M" },
            { id: 110, thumbnail: "https://images.unsplash.com/photo-1504608524841-42fe6f032b4b?w=300&h=400&fit=crop", user: "weather_channel", likes: "45.6K", views: "890K" },
            { id: 111, thumbnail: "https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=300&h=400&fit=crop", user: "mountain_climber", likes: "67.3K", views: "1.3M" },
            { id: 112, thumbnail: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=300&h=400&fit=crop", user: "beach_vibes", likes: "88.9K", views: "1.7M" }
        ];

        // Hashtags for search suggestions
        const HASHTAGS = ["#trending", "#viral", "#fyp", "#foryou", "#dance", "#comedy", "#music", "#travel", "#food", "#fitness", "#beauty", "#gaming"];

        function App() {
            const [isRegistered, setIsRegistered] = useState(false);
            const [showRegistration, setShowRegistration] = useState(false);
            const [videos, setVideos] = useState(INITIAL_VIDEOS);
            const [currentVideoIndex, setCurrentVideoIndex] = useState(0);
            const [savedScrollPosition, setSavedScrollPosition] = useState(0);
            const [commentText, setCommentText] = useState("");
            const [showComments, setShowComments] = useState(false);
            const [activeTab, setActiveTab] = useState('forYou');
            const [showSearch, setShowSearch] = useState(false);
            const [searchQuery, setSearchQuery] = useState("");
            const [currentView, setCurrentView] = useState('home');
            const [previousView, setPreviousView] = useState(null);
            const [isViewTransitioning, setIsViewTransitioning] = useState(false);
            const containerRef = useRef(null);
            const [doubleTapLike, setDoubleTapLike] = useState(false);
            const [isRefreshing, setIsRefreshing] = useState(false);
            const [swipeStartX, setSwipeStartX] = useState(null);

            // Check if user should see registration
            useEffect(() => {
                const hasVisited = localStorage.getItem('talktok_visited');
                if (!hasVisited) {
                    setShowRegistration(true);
                }
            }, []);

            const handleRegistrationComplete = (registered) => {
                setIsRegistered(registered);
                setShowRegistration(false);
            };

            const handleScroll = () => {
                if (containerRef.current && currentView === 'home') {
                    const index = Math.round(containerRef.current.scrollTop / containerRef.current.clientHeight);
                    setCurrentVideoIndex(index);
                    setShowComments(false);
                }
            };

            const toggleFollow = (id) => {
                setVideos(prev => prev.map(v => v.id === id ? { ...v, isFollowed: !v.isFollowed } : v));
            };

            const handleDoubleTap = () => {
                setDoubleTapLike(true);
                setTimeout(() => setDoubleTapLike(false), 500);
            };

            const filteredVideos = activeTab === 'following' 
                ? videos.filter(v => v.isFollowed)
                : videos;

            const handleNavigate = (view) => {
                // Save current scroll position before leaving home
                if (currentView === 'home' && containerRef.current) {
                    setSavedScrollPosition(containerRef.current.scrollTop);
                }
                setPreviousView(currentView);
                setIsViewTransitioning(true);
                setTimeout(() => {
                    setCurrentView(view);
                    setIsViewTransitioning(false);
                }, 50);
            };

            const handleBackToHome = () => {
                setIsViewTransitioning(true);
                setTimeout(() => {
                    setCurrentView('home');
                    // Restore scroll position
                    setTimeout(() => {
                        if (containerRef.current) {
                            containerRef.current.scrollTop = savedScrollPosition;
                        }
                    }, 100);
                    setIsViewTransitioning(false);
                }, 300);
            };

            // Handle swipe to close gesture
            const handleTouchStart = (e) => {
                if (currentView !== 'home') {
                    setSwipeStartX(e.touches[0].clientX);
                }
            };

            const handleTouchMove = (e) => {
                if (swipeStartX !== null && currentView !== 'home') {
                    const currentX = e.touches[0].clientX;
                    const diff = swipeStartX - currentX;
                    // If swipe from right to left (more than 100px), close the tab
                    if (diff > 100) {
                        handleBackToHome();
                        setSwipeStartX(null);
                    }
                }
            };

            const handleTouchEnd = () => {
                setSwipeStartX(null);
            };

            const handleHomeClick = () => {
                if (currentView === 'home' && !isRefreshing) {
                    setIsRefreshing(true);
                    setTimeout(() => {
                        // Shuffle videos to simulate feed refresh
                        const shuffled = [...videos].sort(() => Math.random() - 0.5);
                        setVideos(shuffled);
                        setCurrentVideoIndex(0);
                        setIsRefreshing(false);
                    }, 3000);
                } else {
                    handleNavigate('home');
                }
            };

            const renderMainContent = () => {
                if (currentView === 'profile') {
                    return <ProfileView onBack={handleBackToHome} />;
                }
                if (currentView === 'chats') {
                    return <ChatsView onBack={handleBackToHome} />;
                }
                if (currentView === 'explore') {
                    return <ExploreView onBack={handleBackToHome} />;
                }

                return (
                    <>
                        <header className="absolute top-0 left-0 right-0 z-20 flex justify-center items-center gap-6 p-6 pt-12">
                            <button 
                                onClick={() => setActiveTab('following')}
                                className={`text-sm font-bold transition-all ${activeTab === 'following' ? 'text-white' : 'text-zinc-400'}`}
                            >
                                Following
                            </button>
                            <span className="text-zinc-600">|</span>
                            <button 
                                onClick={() => setActiveTab('forYou')}
                                className={`text-sm font-bold transition-all ${activeTab === 'forYou' ? 'text-white' : 'text-zinc-400'}`}
                            >
                                For You
                            </button>
                            <button 
                                onClick={() => handleNavigate('explore')}
                                className="absolute right-6 p-2 rounded-full bg-zinc-800/50 hover:bg-zinc-700 transition-colors"
                            >
                                <Icon name="search" size={20} />
                            </button>
                        </header>

                        {/* Search Modal */}
                        <div className={`fixed inset-0 z-50 bg-black/90 transition-all duration-300 ${showSearch ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}>
                            <div className={`absolute top-0 left-0 right-0 bg-black transition-transform duration-300 ${showSearch ? 'translate-y-0' : 'translate-y-[-100%]'}`}>
                                <div className="p-4 flex items-center gap-3 border-b border-zinc-800 pt-12">
                                    <button 
                                        onClick={() => setShowSearch(false)}
                                        className="p-2 rounded-full bg-zinc-800/50 hover:bg-zinc-700 transition-colors"
                                    >
                                        <Icon name="back" size={20} />
                                    </button>
                                    <div className="relative flex-1">
                                        <Icon name="search" size={18} className="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400" />
                                        <input 
                                            type="text"
                                            value={searchQuery}
                                            onChange={(e) => setSearchQuery(e.target.value)}
                                            placeholder="Search users, videos, hashtags..."
                                            className="w-full bg-zinc-800 rounded-xl py-2.5 pl-10 pr-4 text-sm outline-none focus:ring-2 focus:ring-white/20 transition-all text-white"
                                            autoFocus
                                        />
                                    </div>
                                </div>
                                <div className="p-4">
                                    {!searchQuery && (
                                        <div>
                                            <h3 className="text-sm font-semibold text-zinc-400 mb-2">Trending Hashtags</h3>
                                            <div className="flex flex-wrap gap-2">
                                                {HASHTAGS.map(tag => (
                                                    <button key={tag} className="px-3 py-1.5 rounded-full bg-zinc-800 text-sm hover:bg-zinc-700 transition-colors text-white">
                                                        {tag}
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                    {searchQuery && (
                                        <div className="space-y-2">
                                            <p className="text-sm text-zinc-400">Search results for "{searchQuery}"</p>
                                            <div className="grid grid-cols-3 gap-1">
                                                {EXPLORE_VIDEOS.filter(v => 
                                                    v.user.toLowerCase().includes(searchQuery.toLowerCase())
                                                ).map(video => (
                                                    <div key={video.id} className="aspect-square bg-zinc-800 rounded overflow-hidden relative cursor-pointer group">
                                                        <img src={video.thumbnail} alt="" className="w-full h-full object-cover" />
                                                        <div className="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity" />
                                                        <div className="absolute bottom-2 left-2">
                                                            <p className="text-xs font-bold">@{video.user}</p>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>

                        <div 
                            ref={containerRef} 
                            onScroll={handleScroll} 
                            className="video-container no-scrollbar"
                            style={{ paddingBottom: '80px' }}
                            onTouchStart={handleTouchStart}
                            onTouchMove={handleTouchMove}
                            onTouchEnd={handleTouchEnd}
                        >
                            {filteredVideos.length > 0 ? (
                                filteredVideos.map((video, index) => (
                                    <VideoPlayer 
                                        key={video.id} 
                                        video={video} 
                                        isActive={index === currentVideoIndex} 
                                        onFollowToggle={toggleFollow}
                                        onDoubleTap={handleDoubleTap}
                                        showComments={showComments && index === currentVideoIndex}
                                        onToggleComments={() => setShowComments(!showComments)}
                                    />
                                ))
                            ) : (
                                <div className="h-[100dvh] h-screen flex flex-col items-center justify-center text-zinc-400" style={{ paddingBottom: '80px' }}>
                                    <Icon name="user" size={48} className="mb-4 opacity-50" />
                                    <p className="text-lg font-semibold">No videos yet</p>
                                    <p className="text-sm">Follow some users to see their videos here</p>
                                </div>
                            )}
                        </div>

                        {/* Comments Overlay - Mobile */}
                        <div 
                            className={`lg:hidden fixed inset-0 z-50 bg-black/80 transition-all duration-300 ${showComments ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}
                            onClick={() => setShowComments(false)}
                        >
                            <div 
                                className={`absolute bottom-0 left-0 right-0 bg-[#0d0d0d] rounded-t-3xl max-h-[90vh] overflow-hidden transition-transform duration-300 ${showComments ? 'translate-y-0' : 'translate-y-full'}`}
                                onClick={(e) => e.stopPropagation()}
                                onTouchEnd={(e) => {
                                    const touch = e.changedTouches[0];
                                    const startY = touch.clientY;
                                    const handleTouchEnd = (endEvent) => {
                                        const endY = endEvent.changedTouches[0].clientY;
                                        if (endY - startY > 80) {
                                            setShowComments(false);
                                        }
                                        document.removeEventListener('touchend', handleTouchEnd);
                                    };
                                    document.addEventListener('touchend', handleTouchEnd);
                                }}
                            >
                                {/* Swipe indicator */}
                                <div className="pt-3 pb-2 flex items-center justify-center cursor-pointer" onClick={() => setShowComments(false)}>
                                    <div className="w-12 h-1.5 bg-zinc-700 rounded-full" />
                                </div>
                                <div className="px-4 pb-3 border-b border-zinc-800">
                                    <h3 className="text-lg font-bold text-center">Comments</h3>
                                </div>
                                <div className="flex-1 overflow-y-auto p-4 space-y-4 pb-28">
                                    <div className="flex gap-3">
                                        <div className="w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-pink-500 shrink-0 flex items-center justify-center">
                                            <Icon name="user" size={18} />
                                        </div>
                                        <div className="flex-1">
                                            <p className="text-sm font-bold">alex_vfx</p>
                                            <p className="text-sm text-zinc-400 mt-1">ÐžÑ„Ð¸Ð³ÐµÐ½Ð½Ñ‹Ð¹ Ð´Ð¸Ð·Ð°Ð¹Ð½, Ð¾Ñ‡ÐµÐ½ÑŒ Ñ‡Ð¸ÑÑ‚Ð¾!</p>
                                        </div>
                                    </div>
                                    <div className="flex gap-3">
                                        <div className="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 shrink-0 flex items-center justify-center">
                                            <Icon name="user" size={18} />
                                        </div>
                                        <div className="flex-1">
                                            <p className="text-sm font-bold">user_pro</p>
                                            <p className="text-sm text-zinc-400 mt-1">Love this! â¤ï¸</p>
                                        </div>
                                    </div>
                                    <div className="flex gap-3">
                                        <div className="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 shrink-0 flex items-center justify-center">
                                            <Icon name="user" size={18} />
                                        </div>
                                        <div className="flex-1">
                                            <p className="text-sm font-bold">creative_mind</p>
                                            <p className="text-sm text-zinc-400 mt-1">Amazing content!</p>
                                        </div>
                                    </div>
                                    <div className="flex gap-3">
                                        <div className="w-10 h-10 rounded-full bg-gradient-to-br from-orange-500 to-red-500 shrink-0 flex items-center justify-center">
                                            <Icon name="user" size={18} />
                                        </div>
                                        <div className="flex-1">
                                            <p className="text-sm font-bold">video_creator</p>
                                            <p className="text-sm text-zinc-400 mt-1">Subscribed! ðŸ””</p>
                                        </div>
                                    </div>
                                    <div className="flex gap-3">
                                        <div className="w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 shrink-0 flex items-center justify-center">
                                            <Icon name="user" size={18} />
                                        </div>
                                        <div className="flex-1">
                                            <p className="text-sm font-bold">travel_bug</p>
                                            <p className="text-sm text-zinc-400 mt-1">This is exactly what I needed today! ðŸŒŸ</p>
                                        </div>
                                    </div>
                                    <div className="flex gap-3">
                                        <div className="w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-rose-500 shrink-0 flex items-center justify-center">
                                            <Icon name="user" size={18} />
                                        </div>
                                        <div className="flex-1">
                                            <p className="text-sm font-bold">music_lover</p>
                                            <p className="text-sm text-zinc-400 mt-1">What song is this? ðŸ”¥</p>
                                        </div>
                                    </div>
                                    <div className="flex gap-3">
                                        <div className="w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 shrink-0 flex items-center justify-center">
                                            <Icon name="user" size={18} />
                                        </div>
                                        <div className="flex-1">
                                            <p className="text-sm font-bold">tech_insider</p>
                                            <p className="text-sm text-zinc-400 mt-1">The quality is insane! ðŸ“±âœ¨</p>
                                        </div>
                                    </div>
                                </div>
                                {/* Input fixed at bottom */}
                                <div className="absolute bottom-0 left-0 right-0 p-4 border-t border-zinc-800 bg-[#0d0d0d]">
                                    <div className="relative flex items-center gap-2 bg-zinc-900 rounded-xl p-2 px-3 border border-zinc-800">
                                        <input 
                                            type="text" 
                                            value={commentText}
                                            onChange={(e) => setCommentText(e.target.value)}
                                            placeholder="Add comment..." 
                                            className="flex-1 bg-transparent border-none text-sm outline-none text-white"
                                        />
                                        <button className={`p-1.5 rounded-lg transition-colors ${commentText ? 'text-white hover:bg-zinc-700' : 'text-zinc-700'}`}>
                                            <Icon name="send" size={18} />
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Mobile Nav */}
                        <nav className="md:hidden fixed bottom-0 left-0 right-0 flex justify-around items-center p-4 bg-black border-t border-zinc-900 z-20 pb-6">
                            <button 
                                onClick={handleHomeClick}
                                disabled={isRefreshing}
                                className={`flex flex-col items-center gap-1 transition-all ${currentView === 'home' && !isRefreshing ? 'text-white' : 'text-zinc-600'} ${isRefreshing ? 'opacity-70' : ''}`}
                            >
                                {isRefreshing ? (
                                    <div className="w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin" />
                                ) : (
                                    <Icon name="home" size={22} />
                                )}
                            </button>
                            <button 
                                onClick={() => setCurrentView('explore')}
                                className={`flex flex-col items-center gap-1 ${currentView === 'explore' ? 'text-white' : 'text-zinc-600'}`}
                            >
                                <Icon name="compass" size={22} />
                            </button>
                            <div className="w-12 h-12 bg-white rounded-full flex items-center justify-center text-black cursor-pointer hover:bg-zinc-200 transition-all hover:scale-105 active:scale-95 shadow-lg">
                                <Icon name="plus" size={20} />
                            </div>
                            <button 
                                onClick={() => setCurrentView('chats')}
                                className={`flex flex-col items-center gap-1 ${currentView === 'chats' ? 'text-white' : 'text-zinc-600'}`}
                            >
                                <Icon name="message" size={22} />
                            </button>
                            <button 
                                onClick={() => setCurrentView('profile')}
                                className={`flex flex-col items-center gap-1 ${currentView === 'profile' ? 'text-white' : 'text-zinc-600'}`}
                            >
                                <Icon name="user" size={22} />
                            </button>
                        </nav>
                    </>
                );
            };

            return (
                <div 
                    className="flex h-[100dvh] h-screen bg-[#0d0d0d] text-zinc-100 overflow-hidden"
                    onTouchStart={handleTouchStart}
                    onTouchMove={handleTouchMove}
                    onTouchEnd={handleTouchEnd}
                >
                    {showRegistration && (
                        <RegistrationModal onComplete={handleRegistrationComplete} />
                    )}
                    
                    {/* Sidebar Desktop */}
                    <aside className="hidden md:flex w-64 flex-col bg-black border-r border-zinc-800/50 p-4">
                        <div className="flex items-center gap-3 px-3 py-6 mb-6">
                            <div className="w-9 h-9 bg-white rounded-lg flex items-center justify-center">
                                <div className="w-5 h-5 bg-black rounded-sm rotate-45"></div>
                            </div>
                            <h1 className="text-2xl font-black tracking-tighter">Talktok</h1>
                        </div>
                        <nav className="flex flex-col gap-1.5 flex-1">
                            <button 
                                onClick={() => handleNavigate('home')}
                                className={`flex items-center gap-4 px-4 py-3.5 rounded-xl transition-all hover:scale-102 ${currentView === 'home' ? 'bg-zinc-800/80 text-white shadow-lg' : 'text-zinc-500 hover:bg-zinc-900 hover:text-white'}`}
                            >
                                <Icon name="home" size={22} /> <span className="font-bold">Ð›ÐµÐ½Ñ‚Ð°</span>
                            </button>
                            <button 
                                onClick={() => handleNavigate('explore')}
                                className={`flex items-center gap-4 px-4 py-3.5 rounded-xl transition-all hover:scale-102 ${currentView === 'explore' ? 'bg-zinc-800/80 text-white shadow-lg' : 'text-zinc-500 hover:bg-zinc-900 hover:text-white'}`}
                            >
                                <Icon name="compass" size={22} /> <span className="font-bold">Ð˜Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾Ðµ</span>
                            </button>
                            <button 
                                onClick={() => handleNavigate('chats')}
                                className={`flex items-center gap-4 px-4 py-3.5 rounded-xl transition-all hover:scale-102 ${currentView === 'chats' ? 'bg-zinc-800/80 text-white shadow-lg' : 'text-zinc-500 hover:bg-zinc-900 hover:text-white'}`}
                            >
                                <Icon name="message" size={22} /> <span className="font-bold">Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ</span>
                            </button>
                            <button 
                                onClick={() => handleNavigate('profile')}
                                className={`flex items-center gap-4 px-4 py-3.5 rounded-xl transition-all hover:scale-102 ${currentView === 'profile' ? 'bg-zinc-800/80 text-white shadow-lg' : 'text-zinc-500 hover:bg-zinc-900 hover:text-white'}`}
                            >
                                <Icon name="user" size={22} /> <span className="font-bold">ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ</span>
                            </button>
                        </nav>
                    </aside>

                    {/* Main Content */}
                    <main className="flex-1 relative flex flex-col h-full bg-black overflow-hidden">
                        {renderMainContent()}
                    </main>

                    {/* Comments Desktop */}
                    <aside className={`hidden lg:flex w-80 flex-col bg-[#0d0d0d] border-l border-zinc-800/50 transition-all duration-300 ${showComments ? 'translate-x-0' : 'translate-x-full'}`}>
                        <div className="p-6 border-b border-zinc-800/50 flex items-center justify-between">
                            <h2 className="text-lg font-black uppercase tracking-widest text-zinc-400 text-sm">ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸</h2>
                            <button onClick={() => setShowComments(false)} className="text-zinc-400 hover:text-white">
                                <Icon name="back" size={18} className="rotate-90" />
                            </button>
                        </div>
                        <div className="flex-1 overflow-y-auto p-6 space-y-6">
                            <div className="flex gap-3">
                                <div className="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-pink-500 shrink-0"></div>
                                <div className="flex-1">
                                    <p className="text-sm font-bold">alex_vfx</p>
                                    <p className="text-sm text-zinc-400 mt-1">ÐžÑ„Ð¸Ð³ÐµÐ½Ð½Ñ‹Ð¹ Ð´Ð¸Ð·Ð°Ð¹Ð½, Ð¾Ñ‡ÐµÐ½ÑŒ Ñ‡Ð¸ÑÑ‚Ð¾!</p>
                                </div>
                            </div>
                            <div className="flex gap-3">
                                <div className="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 shrink-0"></div>
                                <div className="flex-1">
                                    <p className="text-sm font-bold">user_pro</p>
                                    <p className="text-sm text-zinc-400 mt-1">Love this! â¤ï¸</p>
                                </div>
                            </div>
                            <div className="flex gap-3">
                                <div className="w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 shrink-0"></div>
                                <div className="flex-1">
                                    <p className="text-sm font-bold">creative_mind</p>
                                    <p className="text-sm text-zinc-400 mt-1">Amazing content!</p>
                                </div>
                            </div>
                            <div className="flex gap-3">
                                <div className="w-8 h-8 rounded-full bg-gradient-to-br from-orange-500 to-red-500 shrink-0"></div>
                                <div className="flex-1">
                                    <p className="text-sm font-bold">video_creator</p>
                                    <p className="text-sm text-zinc-400 mt-1">Subscribed! ðŸ””</p>
                                </div>
                            </div>
                        </div>
                        <div className="p-4">
                           <div className="relative flex items-center gap-2 bg-zinc-900 rounded-xl p-2 px-3 border border-zinc-800">
                                <input 
                                    type="text" 
                                    value={commentText}
                                    onChange={(e) => setCommentText(e.target.value)}
                                    placeholder="Ð¢ÐµÐºÑÑ‚..." 
                                    className="flex-1 bg-transparent border-none text-sm outline-none"
                                />
                                <button className={`p-1.5 rounded-lg transition-colors ${commentText ? 'text-white hover:bg-zinc-700' : 'text-zinc-700'}`}>
                                    <Icon name="send" size={18} />
                                </button>
                           </div>
                        </div>
                    </aside>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
